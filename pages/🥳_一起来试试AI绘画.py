import os
import openai
from PIL import Image
import streamlit as st
# openai.api_key = os.environ.get('OpenAI_API_Key')

openai.api_key = "xxxxxx"

@st.cache(persist=True,allow_output_mutation=True,show_spinner=False,suppress_st_warning=True)
def openai_image(prompt):
    response = openai.Image.create(
      prompt=prompt,
      n=1,
      size="256x256"
    )
    image_url = response['data'][0]['url']
    return image_url


st.title("ä¸€èµ·æ¥ç©AIç»˜ç”»å§~")
st.markdown("ä»¥ä¸‹è°ƒç”¨çš„æ˜¯OpenAIçš„DALL-E 2æ¨¡å‹ï¼Œå¯ä»¥ç”Ÿæˆä¸€äº›å¾ˆæœ‰æ„æ€çš„å›¾ç‰‡å“¦~")


input_text = st.text_area("åœ¨ä¸‹é¢è¾“å…¥æ–‡å­—æè¿°.. ğŸ™‹",height=50)
image_button = st.button("è§è¯å¥‡è¿¹çš„æ—¶åˆ» ğŸš€")

if image_button and input_text.strip() != "":
    with st.spinner("Loading...ğŸ’«"):
        image_url = openai_image(input_text)
        st.image(image_url, caption='Generated by OpenAI')
# else:
    # st.warning("Please enter something! âš ")

# st.markdown("<br><hr><center>Made with â¤ï¸ by <a href='mailto:ralhanprateek@gmail.com?subject=ChatGPT + DALL-E WebApp!&body=Please specify the issue you are facing with the app.'><strong>Prateek Ralhan</strong></a></center><hr>", unsafe_allow_html=True)
st.markdown("<style> footer {visibility: hidden;} </style>", unsafe_allow_html=True)